# shader基础知识
### halfLambert+phong要点：
Lambert：ndotl; phong: rdotv

**注意要点：**
1.	世界空间下的法线（注意要归一化），世界空间下的光向量（使用_WorldSpaceLightPos0获取，注意要归一化）
2.	反射光线（使用reflect函数，参数是入射光和法线，注意是light的反向量），视线向量（注意要归一化；用相机位置减去世界空间点的坐标，注意是世界空间点的坐标；也可以使用UnityWorldSpaceLightDir（worldpos）来获取。）
3.	rdotv有可能是小于0的数，需要取max。
4.	面板参数是漫反射的颜色/高光颜色/高光次幂

### Blinn-phong
ndoth，h是入射方向和观察方向的中间向量


**入门精要：**
为什么高光在顶点着色器中计算的效果不如片元着色器效果好？

（1 光照计算的细节丢失，因为顶点着色器中光照计算通常是顶点处计算的，意味着光照的计算是基于离散的顶点位置。由于顶点通常较少，导致光照效果不够平滑或不够详细。而片元着色器在每个片元上光照计算，由于片元着色器处理的像素数量远多于顶点，所以它的细节和效果更精确。

（2 顶点着色器计算基于顶点，这些值在光栅化过程中会被插值到每个片元，插值会导致计算结果精度下降。
总体来说，顶点数量太少，其次，要将顶点的计算结果在光栅化过程中插值到片元，这会导致计算精度和细节大大下降。

___

**透明/不透明物体渲染队列**

渲染透明半透明不透明物体渲染顺序

对于不透明物体来说渲染顺序从前往后开深度写入，开启深度检测

对于透明或半透明物体来说渲染顺序是从后往前，禁止深度写入

**【关键代码】**

>//queue用来设置这是透明序列，所以要先渲染不透明的再渲染透明的，材质设置为透明
Tags { "Queue" = "Transparent"  "RenderType"="Transparent" } 

>//设置透明度混合
Blend SrcAlpha OneMinusSrcAlpha

>//关闭深度写入
Zwrite off


一些实现透明的方法
1. 用透明度减去自定义的_cutoff参数。 直接读取贴图，贴图是rgba
2. 需要设置渲染队列和顺序以及混合方式为Blend One/SrcAlpha OneMinusSrcAlpha（1-as）等。混合方式其实是src和dst都存在混合因子，选择相应方式进行混合。
